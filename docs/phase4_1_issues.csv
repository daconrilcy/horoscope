id,title,description,issue_type,module,severity,status,due_date,dependencies,tags
PH4.1-01,RetrievalProxy: intégrer dual-write & shadow-read (feature-flags),Implémenter dans `retrieval_proxy` la double écriture (FAISS+cible) et la lecture fantôme; flags ON/OFF; tests intégration.,feature,retrieval,P0,todo,2025-10-26,,"retrieval,cutover,proxy,flags"
PH4.1-02,Cutover gates: agreement@5 & nDCG@10 + 48h journal,"Calcul métriques, seuils (≥95% / ≥0,90), capture continue 48h, export artefacts; abort si seuils non atteints.",feature,retrieval,P0,todo,2025-10-26,PH4.1-01,"cutover,metrics,quality"
PH4.1-03,Rollback drill bascule vecteur,"Exécuter un drill complet de rollback (désactiver dual-write, purge cible si besoin, retour FAISS), journalisé.",task,retrieval,P0,todo,2025-10-26,PH4.1-01;PH4.1-02,"dr,rollback,cutover"
PH4.1-04,LLM Guard: enforcement + tests d’attaque + métriques,"Règles injection/PII, blocage, logs structurés (rule_id), métrique Prom `llm_guard_block_total`, tests jailbreak/PII fuzz.",feature,security,P0,todo,2025-10-26,,"llmguard,security,pii,prom"
PH4.1-05,Deploy strategy: canary/blue-green scriptée + abort sur burn-rate,Jobs CI/CD pour canary; conditions d’abort (SLO burn-rate); rollback auto; docs runbook.,feature,cicd,P0,todo,2025-10-26,,"deploy,canary,bluegreen,error-budget"
PH4.1-06,SLOs chiffrés par endpoint + dashboards + policy burn-rate,Publier SLOs (P95/P99/err_rate) `slo.yaml`; dashboards; policy freeze auto > seuil.,feature,observability,P1,todo,2025-10-29,,"slo,burn-rate,grafana"
PH4.1-07,"Bench multi-tenant (noisy neighbor, warm/cold) + rapport",Scénarios multi-tenant; QPS par tenant; mesures P95/P99; top-k/chunk; rapport versionné.,task,performance,P1,todo,2025-10-29,,"bench,perf,multi-tenant"
PH4.1-08,API Gateway: enveloppe d’erreur standard + idempotency-keys,"Uniformiser erreurs (`code`,`message`,`trace_id`), POST idempotent; tests e2e.",feature,apigw,P1,todo,2025-10-29,,"api,contracts,idempotency"
PH4.1-09,API Gateway: quotas/rate-limit par tenant + 429 Retry-After,"Limiter au gateway (clé OIDC), retour 429 cohérent; métriques par tenant.",feature,apigw,P1,todo,2025-10-29,,"rate-limit,quota,tenant"
PH4.1-10,API versioning `/v1` + deprecation policy,"Forcer `/v1`, doc deprecation; routes legacy redirigées avec warning.",task,apigw,P1,todo,2025-10-29,,"versioning,deprecation"
PH4.1-11,Metrics par endpoint (Prom) + traces corrélées,"Exposer `*_seconds_bucket`, `*_total` par route; `trace_id` logué.",task,observability,P1,todo,2025-10-29,,"metrics,tracing"
PH4.1-12,Timeouts/backoff au gateway + retry-budget,Timeouts cohérents; budget de retry; tests de résilience.,task,apigw,P1,todo,2025-10-29,,"resilience,timeouts"
PH4.1-13,Idempotency ack après commit (API→workers),"Accuser réception après commit DB, éviter doubles effets; tests intégration.",feature,backend,P1,todo,2025-10-29,,"idempotency,celery"
PH4.1-14,Fair scheduling & concurrency par tenant (Celery),Limiter concurrency par tenant; WFQ; monitorer queue length; runbook.,feature,workers,P1,todo,2025-10-29,,"celery,scheduling,tenant"
PH4.1-15,PII masking logging/traces + TTL/rétentions,Masquer PII; appliquer TTL et rétention sur logs/traces/indices; tests.,feature,data,P1,todo,2025-10-29,,"pii,ttl,retention"
PH4.1-16,Catalogue PII + DPIA mise à jour,Cartographier PII; mettre à jour DPIA/registre; publier doc.,task,compliance,P1,todo,2025-10-29,,"rgpd,dpia,catalogue"
PH4.1-17,Vector store DR: backup/restore test + RPO/RTO,Tester sauvegarde/restauration; documenter RPO/RTO; coûts egress.,task,retrieval,P1,todo,2025-10-29,,"dr,backup,vectorstore"
PH4.1-18,Poison queue: quarantine & replay + runbook,Procédure d’isolement et de reprise des messages corrompus.,task,workers,P1,todo,2025-10-29,,"reliability,runbook"
PH4.1-19,Automatiser `.github/workflows/embeddings.yml`,Déclencheurs sur changements contenu/modèle; artefacts signés.,task,cicd,P2,todo,2025-10-31,,"automation,embeddings"
PH4.1-20,"Evidence Pack: coverage JSON, SLO report, bench, snapshots",Pipeline d’export des artefacts et versionnement.,task,cicd,P2,todo,2025-10-31,,"evidence,artifacts,reporting"
